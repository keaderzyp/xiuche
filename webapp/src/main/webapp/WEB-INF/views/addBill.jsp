<%@ page language="java" import="java.util.*" pageEncoding="utf-8"%><%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%><%String path = request.getContextPath();String basePath = request.getScheme() + "://" + request.getServerName() + ":" + request.getServerPort() + path + "/";%><!DOCTYPE html><html>    <head>        <base href="<%=basePath%>">        <meta charset="UTF-8">        <title>bill manage</title>                		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />		<meta name="description" content="Dynamic tables and grids using jqGrid plugin" />		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />	<style type="text/css">		.control-label{			width: auto !important;		}		.portlet{			margin: 0px !important;		}		.modal{		top:10%;			left: 10%;			width: 80%;		}		.modal iframe{			width: 100%;			height: 400px;			border: none;		}@media screen and (min-width: 768px){}.modal-dialog {    width: auto;}.modal-dialog {    position: relative;    z-index: 1050;}	</style>		<!-- page specific plugin styles -->		<link rel="stylesheet" href="assets/css/jquery-ui.css" />		<link rel="stylesheet" href="assets/css/bootstrap-datepicker3.css" />		<link rel="stylesheet" href="assets/css/ui.jqgrid.css" />	<link href="assets/plugins/bootstrap-datetimepicker/css/datetimepicker.css" rel="stylesheet" type="text/css" />				<!-- ace styles -->			<link rel="stylesheet" href="assets/css/ace.css" class="ace-main-stylesheet" id="main-ace-style" />						<!-- END GLOBAL MANDATORY STYLES -->			<!-- BEGIN PAGE LEVEL STYLES -->					<!-- END PAGE LEVEL STYLES -->				<!-- inline styles related to this page -->		<!-- HTML5shiv and Respond.js for IE8 to support HTML5 elements and media queries -->		            </head>    <body>        <!-- #section:basics/content.breadcrumbs -->          <div class="breadcrumbs" id="breadcrumbs">              <script type="text/javascript">                  try {                      ace.settings.check('breadcrumbs', 'fixed')                  } catch (e) {                  }              </script>                <ul class="breadcrumb">                           <!-- bread_crumb -->                  <li><i class="ace-icon fa fa-home home-icon"></i> <a href="#">首页</a>                  </li>                    <li><a href="#">账单管理</a></li>                  <li class="#">新增账单</li>              </ul>              <!-- /.breadcrumb -->          </div>            <br/>        <!-- /section:basics/content.breadcrumbs -->              <!-- //表格 -->              <!-- /.row -->          <!-- /.page-content -->   <div>			<!-- BEGIN SAMPLE PORTLET CONFIGURATION MODAL FORM-->        				<br />		<!-- END SAMPLE PORTLET CONFIGURATION MODAL FORM-->			<!-- BEGIN PAGE CONTAINER-->			<form action="rest/bill/new" id="billform" method="post">			<div class="portlet box">														           <div class="col-xs-10" >  		                                    <div id="" class="col-xs-5">  		                                            <input type="search" class="form-control input-sm"  		                                                placeholder="输入主题" aria-controls="dynamic-table" name="billname">  		                                    </div>  		                                    <!-- <div class="col-xs-5">        纵行长度  		                                         <input type="search" class="form-control input-sm"  		                                                placeholder="输入区间" aria-controls="dynamic-table" name="timezone">  		                                          		                                    </div>  -->		                                    								        		<div class="col-md-3">									        		<div class="input-group " >								        				<div class="input-group-addon">								        					注册时间								        				</div>								        				<input name="beginTime" placeholder="起始时间" type="text" value="${u.beginTime }" data-date-format="yyyy/mm/dd" class="form-control date form_date"/>								        				<input name="endTime" placeholder="结束时间" type="text" value="${u.endTime }"  data-date-format="yyyy/mm/dd" class="form-control date form_date"/>								        			</div>								        		</div><!-- 						        <div class="pull-right">  						            <a href="#" class="btn btn-mini btn-primary">导入订单信息</a>  						            <a href="scjhgl/scjh.html" class="_p btn btn-mini btn-primary">下达生产计划</a>  						            <a href="#" class="btn btn-mini btn-primary">闭单</a>  						        </div>  -->         				</div>        				<br />	        				<br />					 <input type="hidden" name="helpIds" id="helpIds"/>  					<div class="portlet-body">						<div class="text-right">							<button class="btn blue" id="modalBtn" data-toggle="modal">增加事故记录</button>						</div>						<table class="table table-striped table-bordered table-advance table-hover">							<thead>								<tr>									<th></th>									<th><i class="icon-briefcase"></i> 事故编号</th>									<th class="hidden-phone"><i class="icon-user"></i> 事故时间</th>									<th><i class="icon-shopping-cart"></i> 事故地点</th>									<th style="width: 300px;">事故说明</th>									<th>费用</th>									<th>操作</th>								</tr>							</thead>							<tbody class="targetTable">							</tbody>						</table>					</div>				</form>			</div>			<!-- END PAGE CONTAINER-->    		</div>		<div class="modal fade" id="model"  role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">				    <div class="modal-dialog">				        <div class="modal-content">				            <div class="modal-header">				                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>				                <h4 class="modal-title" id="myModalLabel">事故处理</h4>				            </div>				            <div class="modal-body">				            		<iframe id="frame" style="width: 100%;" src="rest/help/getHelpInfoForBill" width="" height=""></iframe>				            					            </div>				            <div class="modal-footer">				                <button type="button" id="chooseAccident" data-dismiss="modal" class="btn btn-primary">选择</button>				               <button type="button" id="reset" class="btn btn-default" >清除重选</button>				               <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>				            </div>				        </div><!-- /.modal-content -->				    </div><!-- /.modal -->		</div>													<div class="btn-group pull-right">		                                        <button type="button" id="formButton" class="btn btn-sm btn-primary">保存</button>  		                                        <button type="button" class="btn btn-sm btn-primary">取消</button> 									</div>  <!-- /.main-content -->          		                                        	<!-- END CORE PLUGINS -->	<!-- BEGIN PAGE LEVEL PLUGINS -->	<!-- END PAGE LEVEL PLUGINS -->	<!-- BEGIN PAGE LEVEL SCRIPTS -->	<script src="media/js/table-managed.js"></script>     	<script>		jQuery(document).ready(function() {       		   //App.init();		   TableManaged.init();           $('#formButton').click(function (e) {        	           	   $("#billform").submit();        	           	           	   /*               	var url = "rest/help/getHelpInfoForBill";                  $.get(url, function(data) {                      $('#main-content').html(data);                  }); */              });		});	</script>	<!-- END CORE PLUGINS -->	<!-- BEGIN PAGE LEVEL PLUGINS -->	<!-- END PAGE LEVEL PLUGINS -->	<!-- BEGIN PAGE LEVEL SCRIPTS -->	<script src="media/js/app.js" type="text/javascript"></script>	<script src="media/js/index.js" type="text/javascript"></script>        	<!-- END PAGE LEVEL SCRIPTS -->  	<script>		jQuery(document).ready(function() {    		   //App.init(); // initlayout and core plugins		   //FormComponents.init();		   Index.init();		  //显示弹窗的方法		   $("#modalBtn").on('click',function(){		   	 $('#frame').prop('src','rest/help/getHelpInfoForBill');		   	 $("#model").modal();		   });		   //从弹窗中取值的方法		   //声明添加过的数组对象		   var oldRn = [];		   $("#chooseAccident").on('click',function(){		   	   var rn = $('#frame')[0].contentWindow.rn		   	   //console.log(rn);		   	   //console.log('old',oldRn);		   	   //解决重复添加的问题重复的数据添加不到表格中		   	   if(oldRn.length>0){		   	   	  for(var i=0;i<oldRn.length;i++){		   	   	  	for(var j=0;j<rn.length;j++){		   	   	  		if(oldRn[i].id==rn[j].id){		   	   	  			rn.splice(j,1);		   	   	  			break;		   	   	  		}		   	   	  	}		   	   	  }		   	   }		   	  // console.log(rn);			   //console.log($('#frame')[0].contentWindow.rn);			   //将小窗口中选择的数据添加到表格中			   for(var i=0;i<rn.length;i++){				   	var tr = '<tr> '+							'	<td class="highlight"> '+							'		<!--id隐藏域--> '+							'		<input name="id[]" id="id" type="checkbox" checked="checked" value="'+rn[i].helpId+'" /> '+							'	</td> '+							'	<td class="highlight"> '+							'		'+rn[i].helpId+' '+							'		<!--id隐藏域--> '+							'	</td> '+							'	<td class="hidden-phone">'+rn[i].helpTime+'</td> '+							'	<td>'+rn[i].happenPosition+'</td> '+							'	<td>'+rn[i].param2+'</td> '+							'	<td> '+							'		'+rn[i].factCost+' '+							'		<!--金额隐藏域--> '+							'		<input name="pay" type="hidden" value="'+rn[i].factCost+'" /> '+							'	</td> '+							'	<td> '+							'		<a  class="btn del mini red"> '+							'			<i class="icon-edit"></i> 删除 '+							'		</a> '+							'	</td> '+							'</tr>';				  // console.log(tr);				   $(".targetTable").append(tr);			   }			   oldRn=oldRn.concat(rn);		   });		   //重置方法		   $('#reset').on('click',function(){		   	   $('#frame').prop('src','rest/help/getHelpInfoForBill');		   });		   //删除表格数据的方法		   $(document).on('click','.del',function(){		   		var tr = $(this).parent().parent();		   		var id = $(this).parent().parent().children().eq(0).children('input').val();		   		//在检测重复数据的数组对象中把对应的对象删除		   		for(var i=0;i<oldRn.length;i++){		   			if(oldRn[i].id==id){		   				oldRn.splice(i,1);		   				break;		   			}		   		}		   		//将表格中的该行数据清除		   		tr.remove();		   })		});	</script>			<script type="text/javascript">			//跳转页面代码			$('.form_date').datetimepicker({		        language:  'zh-CN',		        weekStart: 1,		        todayBtn:  1,				autoclose: 1,				todayHighlight: 1,				startView: 2,				minView: 2,				forceParse: 0		    });					</script>	<!-- END JAVASCRIPTS --><script type="text/javascript">  var _gaq = _gaq || [];  _gaq.push(['_setAccount', 'UA-37564768-1']);  _gaq.push(['_setDomainName', 'keenthemes.com']);  _gaq.push(['_setAllowLinker', true]);  _gaq.push(['_trackPageview']);  (function() {    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;    ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);  })();</script>    </body></html>